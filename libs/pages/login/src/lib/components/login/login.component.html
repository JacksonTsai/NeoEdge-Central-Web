<div class="login-wrapper">
  <img class="logo-img" src="assets/images/neoedge_logo_blue.png" alt="NeoEdge web" />

  <form [formGroup]="form" (keyup.enter)="singIn()" (ngSubmit)="singIn()">
    <mat-card class="login-card">
      <h2 class="welcome-title">
        Welcome to
        <span class="neoedge">NeoEdge</span>
      </h2>
      <mat-form-field class="login-form-field" appearance="outline" floatLabel="always">
        <mat-label>Email</mat-label>
        <input matInput formControlName="account" type="text" maxlength="128" id="login-email" />
        @if (accountCtrl.hasError('required')) {
        <mat-error>Required.</mat-error>
        } @if (accountCtrl.hasError('email')) {
        <mat-error> Please enter a valid email address </mat-error>
        }
      </mat-form-field>
      <mat-form-field class="login-form-field" appearance="outline" floatLabel="always">
        <mat-label>Password</mat-label>
        <input
          matInput
          formControlName="password"
          [type]="formService.getPasswordVisibility('password')() ? 'password' : 'text'"
          maxlength="128"
          id="login-password"
        />
        <button id="login-password-toggle" type="button" mat-icon-button matSuffix (click)="formService.togglePasswordVisibility('password')">
          @if (formService.getPasswordVisibility('password')()) {
          <mat-icon class="visibility-icon" svgIcon="icon:visibility_off"></mat-icon>
          } @else {
          <mat-icon class="visibility-icon" svgIcon="icon:visibility"></mat-icon>
          }
        </button>
        @if (passwordCtrl.hasError('required')) {
        <mat-error>Required.</mat-error>
        }
      </mat-form-field>

      <mat-checkbox color="primary" [formControl]="rememberMeCtrl">Remember me</mat-checkbox>

      <button
        type="button"
        class="login-card__btn login-btn"
        mat-flat-button
        color="primary"
        (click)="singIn()"
        [disabled]="form.invalid"
        id="login-password-sign"
      >
        Sign In
      </button>

      <div class="or-container">
        <div class="divider"></div>
        <div class="or-label">or</div>
        <div class="divider"></div>
      </div>

      <button
        type="button"
        class="login-card__btn"
        mat-stroked-button
        (click)="singInWithAzure()"
        id="login-password-sign-azure"
      >
        Sign in with Azure AD
      </button>

      <span class="forgot-password" id="login-password-forgot">
        <a [routerLink]="'/request-new-password'"> Forgot password ? </a>
      </span>
    </mat-card>
  </form>
</div>
