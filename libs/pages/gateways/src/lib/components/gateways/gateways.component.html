<h1 class="page-title">Gateways</h1>
<div class="gateway-top-action">
  <mat-form-field class="search-input-field" appearance="outline" floatLabel="always">
    <mat-label>Search</mat-label>
    <input
      id="gateways-search-name"
      matInput
      placeholder="Search gateway"
      [formControl]="searchGatewayCtrl"
      maxlength="128"
      type="text"
    />
    <mat-icon matSuffix svgIcon="icon:search"></mat-icon>
  </mat-form-field>

  <mat-form-field class="search-input-field" appearance="outline" floatLabel="always">
    <mat-label>Search</mat-label>
    <input
      id="gateways-search-name"
      matInput
      placeholder="Search label"
      [formControl]="searchLabelCtrl"
      maxlength="128"
      type="text"
    />
    <mat-icon matSuffix svgIcon="icon:search"></mat-icon>
  </mat-form-field>

  <button id="users-invite-user" type="button" mat-stroked-button color="primary" (click)="onMangeLabel()">
    <mat-icon svgIcon="icon:add_primary_stroked"></mat-icon>
    Manage Label
  </button>

  <button id="users-invite-user" type="button" mat-stroked-button color="primary" (click)="addGateway()">
    <mat-icon svgIcon="icon:add_primary_stroked"></mat-icon>
    Add Gateway
  </button>
</div>
<mat-card class="gateways-card">
  <table [fixedLayout]="false" mat-table [dataSource]="dataSource" class="users-card__table">
    <ng-container matColumnDef="no">
      <th mat-header-cell *matHeaderCellDef>No.</th>
      <td mat-cell *matCellDef="let element; let i = index">{{ i + 1 }}</td>
    </ng-container>

    <ng-container matColumnDef="gatewayIcon">
      <th mat-header-cell *matHeaderCellDef>Icon</th>
      <td mat-cell *matCellDef="let element">
        @if (element?.gatewayIconPath ) {
        <img width="100%" height="100%" [src]="element.gatewayIconPath" />
        }
      </td>
    </ng-container>

    <ng-container matColumnDef="gatewayModel">
      <th mat-header-cell *matHeaderCellDef>Model</th>
      <td mat-cell *matCellDef="let element">
        <div>{{ element.ipcVendorName }}</div>
        <div>{{ element.ipcModelName }}</div>
      </td>
    </ng-container>

    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef>Name</th>
      <td mat-cell *matCellDef="let element">{{ element.name }}</td>
    </ng-container>

    <ng-container matColumnDef="tagNumber">
      <th mat-header-cell *matHeaderCellDef>Tag Number</th>
      <td mat-cell *matCellDef="let element">
        {{ element.tagNumber }}
      </td>
    </ng-container>

    <ng-container matColumnDef="sshMode">
      <th mat-header-cell *matHeaderCellDef>SSH Service</th>
      <td mat-cell *matCellDef="let element">
        @if ( gwSshMode.TRUE === element.sshMode) {
        <span>Enable</span>
        } @else {
        <span>Disabled</span>
        }
      </td>
    </ng-container>

    <ng-container matColumnDef="labels">
      <th mat-header-cell *matHeaderCellDef>Labels</th>
      <td mat-cell *matCellDef="let element">
        @if (!element.labels) {
        {{ element.labels.name }}/
        {{ element.labels.value }}
        }
      </td>
    </ng-container>

    <ng-container matColumnDef="action">
      <th mat-header-cell *matHeaderCellDef>Action</th>
      <td mat-cell *matCellDef="let element">
        <div class="table-action">
          <button
            id="gateways-detail-{{ element.id }}"
            type="button"
            mat-stroked-button
            color="primary"
            (click)="onGatewayDetail(element)"
          >
            Detail
          </button>
        </div>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
  <mat-paginator
    id="users-pagination"
    [pageSizeOptions]="[10, 25, 50, 100]"
    [length]="gatewaysLength()"
    showFirstLastButtons
    aria-label="Select page of users"
  ></mat-paginator>
</mat-card>
